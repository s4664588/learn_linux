# PuTTY SSH Tunnel ä½¿ç”¨æŒ‡å—

> Windows ç”¨æˆ¶ä½¿ç”¨ PuTTY é€²è¡Œ SSH Tunnel é€£ç·š  
> åŸºæ–¼ hello02923 çš„ SSH Tunnel æ–‡ç« å¯¦ä½œ  
> åƒè€ƒï¼šhttps://ithelp.ithome.com.tw/articles/10290848

## ğŸ¯ æ ¸å¿ƒæ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Client    â”‚    â”‚SSH Gateway  â”‚    â”‚Target Serverâ”‚
â”‚   (PuTTY)   â”‚â—„â”€â”€â–ºâ”‚ (è·³æ¿ä¸»æ©Ÿ)   â”‚â—„â”€â”€â–ºâ”‚ (ç›®æ¨™ä¸»æ©Ÿ)   â”‚
â”‚             â”‚    â”‚ Port: 2222  â”‚    â”‚ Port: 80,22 â”‚
â”‚             â”‚    â”‚ sshuser     â”‚    â”‚ Port: 3306  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      æœ¬æ©Ÿ              localhost:2222        å…§éƒ¨ç¶²è·¯
```

## ğŸš€ å¿«é€Ÿé–‹å§‹

### 1. è‡ªå‹•åŒ–æ¸¬è©¦ï¼ˆæ¨è–¦ï¼‰
```powershell
# å•Ÿå‹•äº’å‹•å¼å·¥å…·
.\putty-tunnel-test.ps1

# é¸æ“‡æ“ä½œï¼š
# 1 - å®‰è£ PuTTY
# 2 - è¨­å®šç’°å¢ƒ  
# 3 - åŸ·è¡Œæ¸¬è©¦
# 4 - æ¸…ç†ç’°å¢ƒ
# 5 - å®Œæ•´æµç¨‹
```

### 2. æ‰‹å‹•æ“ä½œ
```powershell
# å•Ÿå‹•æ¸¬è©¦ç’°å¢ƒ
docker-compose up -d

# ä½¿ç”¨ PuTTY é€£ç·š
# Host: localhost, Port: 2222
# User: sshuser, Password: password123
```

## ğŸ”§ PuTTY è¨­å®š

### GUI è¨­å®šæ­¥é©Ÿ
1. **åŸºæœ¬é€£ç·š**ï¼š
   - Host Name: `localhost`
   - Port: `2222`
   - Connection type: `SSH`

2. **SSH Tunnel è¨­å®š**ï¼ˆConnection â†’ SSH â†’ Tunnelsï¼‰ï¼š
   - `8080` â†’ `target-server-1:80` (Web æœå‹™)
   - `8081` â†’ `target-server-1:22` (SSH æœå‹™)
   - `8083` â†’ `target-server-2:3306` (è³‡æ–™åº«)

3. **å„²å­˜ Session**ï¼š`SSH-Gateway-Tunnels`

### å‘½ä»¤åˆ—æ“ä½œ
```cmd
# å»ºç«‹ SSH Tunnel
plink -ssh -L 8080:target-server-1:80 -L 8081:target-server-1:22 -L 8083:target-server-2:3306 -P 2222 sshuser@localhost

# èƒŒæ™¯åŸ·è¡Œ
plink -ssh -L 8080:target-server-1:80 -P 2222 sshuser@localhost -N
```

## ğŸ§ª æ¸¬è©¦é©—è­‰

### é©—è­‰ SSH Tunnel
```powershell
# æª¢æŸ¥ Port ç‹€æ…‹
netstat -an | findstr :808

# æ¸¬è©¦ Web æœå‹™
curl http://localhost:8080

# æ¸¬è©¦ SSH æœå‹™
putty -ssh -P 8081 root@localhost

# æ¸¬è©¦è³‡æ–™åº«
Test-NetConnection localhost -Port 8083
```

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ
1. **PuTTY æœªå®‰è£**ï¼šä½¿ç”¨å·¥å…·é¸é … 1 è‡ªå‹•å®‰è£
2. **Docker æœªå•Ÿå‹•**ï¼šå•Ÿå‹• Docker Desktop
3. **SSH ä¸»æ©Ÿé‡‘é‘°å•é¡Œ**ï¼šç¬¬ä¸€æ¬¡é€£ç·šéœ€è¦æ¥å—ä¸»æ©Ÿé‡‘é‘°
   - çœ‹åˆ° "Store key in cache? (y/n)" æ™‚è¼¸å…¥ `y`
   - æˆ–åŸ·è¡Œ `.\setup-ssh-keys.ps1` è‡ªå‹•è¨­å®š
4. **é€£ç·šè¢«æ‹’**ï¼šæª¢æŸ¥å®¹å™¨ç‹€æ…‹ `docker-compose ps`
5. **Port è¢«ä½”ç”¨**ï¼šä½¿ç”¨ `netstat -ano | findstr :8080` æª¢æŸ¥

### ç’°å¢ƒæª¢æŸ¥
```powershell
# ä½¿ç”¨å·¥å…·é¸é … 7 æª¢æŸ¥ç’°å¢ƒç‹€æ…‹ (åœ¨ Day1 è³‡æ–™å¤¾ä¸­åŸ·è¡Œ)
cd Day1
.\putty-tunnel-test.ps1
# è¼¸å…¥: 7
```

## ğŸ“‹ å¯¦éš›æ‡‰ç”¨

### ä¼æ¥­å ´æ™¯
- **é ç«¯è¾¦å…¬**ï¼šå®¶ä¸­é›»è…¦ â†’ å…¬å¸è·³æ¿æ©Ÿ â†’ å…§éƒ¨ç³»çµ±
- **ç³»çµ±ç®¡ç†**ï¼šç®¡ç†å“¡é›»è…¦ â†’ è·³æ¿æ©Ÿ â†’ å…§éƒ¨ä¼ºæœå™¨
- **é–‹ç™¼å­˜å–**ï¼šé–‹ç™¼é›»è…¦ â†’ è·³æ¿æ©Ÿ â†’ å…§éƒ¨è³‡æ–™åº«

### å®‰å…¨è€ƒé‡
- ä½¿ç”¨é‡‘é‘°èªè­‰æ›¿ä»£å¯†ç¢¼
- é™åˆ¶ SSH é€£ç·šä¾†æº IP
- å®šæœŸæ›´æ›èªè­‰è³‡è¨Š
- ç›£æ§é€£ç·šæ—¥èªŒ

---

**æ ¸å¿ƒé‡é»**ï¼šé€é PuTTY å»ºç«‹ SSH Tunnelï¼Œè®“æœ¬æ©Ÿå¯ä»¥å®‰å…¨å­˜å–å…§éƒ¨ç¶²è·¯æœå‹™ï¼Œå®Œå…¨ç¬¦åˆä¼æ¥­ç´šè·³æ¿ä¸»æ©Ÿæ‡‰ç”¨éœ€æ±‚ã€‚